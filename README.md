# ЁЯЫНя╕П Affiliate Product Review Bot

LINE Bot р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕╡р╕зр╕┤р╕зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Бр╕ер╕░ Affiliate Marketing р╕Чр╕╡р╣Ир╕бр╕╡р╕гр╕░р╕Ър╕Ъ AI р╕Кр╣Ир╕зр╕вр╣Гр╕Щр╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓р╣Бр╕ер╕░р╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓

## тЬи р╕Др╕╕р╕Ур╕кр╕бр╕Ър╕▒р╕Хр╕┤р╕лр╕ер╕▒р╕Б

### ЁЯУ▒ LINE Bot Features
- **р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓**: р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Фр╣Йр╕зр╕вр╕Кр╕╖р╣Ир╕н, р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И, р╕гр╕лр╕▒р╕кр╕кр╕┤р╕Щр╕Др╣Йр╕▓
- **р╕гр╕╡р╕зр╕┤р╕зр╕кр╕┤р╕Щр╕Др╣Йр╕▓**: р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Бр╕Ър╕Ъ Flex Message
- **р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓**: р╣Ар╕Юр╕┤р╣Ир╕б/р╣Бр╕Бр╣Йр╣Др╕В/р╕ер╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓ (р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕нр╕Фр╕бр╕┤р╕Щ)
- **AI Search**: р╕Др╣Йр╕Щр╕лр╕▓р╕нр╕▒р╕Ир╕Йр╕гр╕┤р╕вр╕░р╕Фр╣Йр╕зр╕в AI
- **р╕кр╕Цр╕┤р╕Хр╕┤р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ**: р╕Фр╕╣р╕кр╕Цр╕┤р╕Хр╕┤р╣Бр╕ер╕░р╕Др╕│р╕Др╣Йр╕Щр╕лр╕▓р╕вр╕нр╕Фр╕Щр╕┤р╕вр╕б

### ЁЯЧГя╕П Database Schema
**р╕Хр╕▓р╕гр╕▓р╕З `products`:**
```
| Field             | Type         | Description               |
|-------------------|--------------|---------------------------|
| id                | SERIAL       | Primary Key               |
| product_code      | VARCHAR(50)  | р╕гр╕лр╕▒р╕кр╕кр╕┤р╕Щр╕Др╣Йр╕▓ (Unique)        |
| product_name      | VARCHAR(255) | р╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓                 |
| price             | DECIMAL      | р╕гр╕▓р╕Др╕▓                      |
| sold_count        | INTEGER      | р╕Ир╕│р╕Щр╕зр╕Щр╕Чр╕╡р╣Ир╕Вр╕▓р╕вр╣Бр╕ер╣Йр╕з            |
| shop_name         | VARCHAR(255) | р╕Кр╕╖р╣Ир╕нр╕гр╣Йр╕▓р╕Щр╕Др╣Йр╕▓                |
| commission_rate   | DECIMAL(5,2) | р╕нр╕▒р╕Хр╕гр╕▓р╕Др╣Ир╕▓р╕Др╕нр╕бр╕бр╕┤р╕Кр╕Кр╕▒р╕Щ (%)      |
| commission_amount | DECIMAL      | р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Зр╕┤р╕Щр╕Др╕нр╕бр╕бр╕┤р╕Кр╕Кр╕▒р╕Щ         |
| product_link      | TEXT         | р╕ер╕┤р╕Зр╕Бр╣Мр╕кр╕┤р╕Щр╕Др╣Йр╕▓                |
| offer_link        | TEXT         | р╕ер╕┤р╕Зр╕Бр╣М Affiliate           |
| category          | VARCHAR(100) | р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И                  |
| description       | TEXT         | р╕Др╕│р╕нр╕Шр╕┤р╕Ър╕▓р╕вр╕кр╕┤р╕Щр╕Др╣Йр╕▓             |
| image_url         | TEXT         | URL р╕гр╕╣р╕Ыр╕ар╕▓р╕Ю               |
| rating            | DECIMAL(3,2) | р╕Др╕░р╣Бр╕Щр╕Щр╕гр╕╡р╕зр╕┤р╕з (1-5)          |
```

### ЁЯЪА API Endpoints

#### Authentication
- `GET /` - р╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Б + р╕Вр╣Йр╕нр╕бр╕╣р╕е API
- `GET /health` - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕Цр╕▓р╕Щр╕░р╕гр╕░р╕Ър╕Ъ

#### Products Management
- `GET /api/products` - р╕Фр╕╢р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- `POST /api/products` - р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
- `PUT /api/products?code={product_code}` - р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕кр╕┤р╕Щр╕Др╣Йр╕▓
- `DELETE /api/products?code={product_code}` - р╕ер╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓

#### Search & Analytics
- `GET /api/search?query={query}&limit={limit}&ai={true/false}` - р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓
- `GET /api/stats` - р╕Фр╕╣р╕кр╕Цр╕┤р╕Хр╕┤р╕гр╕░р╕Ър╕Ъ

#### Review Generation
- `POST /api/review` - р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕╡р╕зр╕┤р╕зр╕кр╕┤р╕Щр╕Др╣Йр╕▓

#### LINE Bot
- `POST /callback` - LINE Bot Webhook

## ЁЯЫая╕П р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З

### 1. Clone Repository
```bash
git clone <repository-url>
cd affiliate-product-review-bot
```

### 2. р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З Dependencies
```bash
pip install -r requirements.txt
```

### 3. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Environment Variables
р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М `.env`:
```env
# LINE Bot Configuration
LINE_CHANNEL_ACCESS_TOKEN=your_line_channel_access_token
LINE_CHANNEL_SECRET=your_line_channel_secret

# Supabase Configuration (р╣Бр╕Щр╕░р╕Щр╕│)
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_anon_key
USE_SUPABASE=true

# AI Configuration (р╣Др╕бр╣Ир╕Ър╕▒р╕Зр╕Др╕▒р╕Ъ)
OPENAI_API_KEY=your_openai_api_key
USE_AI_SEARCH=false

# Application Settings
DEBUG=false
PORT=5000
HOST=0.0.0.0
SECRET_KEY=your-secret-key

# Affiliate Settings
DEFAULT_COMMISSION_RATE=5.0
MAX_RESULTS_PER_SEARCH=5
```

### 4. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е Supabase
1. р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д Supabase р╣Гр╕лр╕бр╣И
2. р╕гр╕▒р╕Щр╕Др╕│р╕кр╕▒р╣Ир╕З SQL р╣Гр╕Щ `create_supabase_tables.sql`
3. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ RLS policies р╕Хр╕▓р╕бр╕Чр╕╡р╣Ир╕гр╕░р╕Ър╕╕р╣Гр╕Щр╣Др╕Я┘Др╣М

### 5. р╕гр╕▒р╕Щр╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щ
```bash
python main.py
```

## ЁЯОп р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ LINE Bot

### р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Чр╕▒р╣Ир╕зр╣Др╕Ы:
- **р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓**: р╕Юр╕┤р╕бр╕Юр╣Мр╕Кр╕╖р╣Ир╕нр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕лр╕гр╕╖р╕нр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И
- **р╕Др╣Йр╕Щр╕лр╕▓р╕Фр╣Йр╕зр╕вр╕гр╕лр╕▒р╕к**: р╕Юр╕┤р╕бр╕Юр╣М `р╕гр╕лр╕▒р╕к PHONE001`
- **р╕Фр╕╣р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И**: р╕Юр╕┤р╕бр╕Юр╣М `р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И`
- **р╕Фр╕╣р╕кр╕Цр╕┤р╕Хр╕┤**: р╕Юр╕┤р╕бр╕Юр╣М `р╕кр╕Цр╕┤р╕Хр╕┤`

### р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕нр╕Фр╕бр╕┤р╕Щ:
- **р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╣Вр╕лр╕бр╕Фр╣Бр╕нр╕Фр╕бр╕┤р╕Щ**: р╕Юр╕┤р╕бр╕Юр╣М `р╣Бр╕нр╕Фр╕бр╕┤р╕Щ` р╕лр╕гр╕╖р╕н `admin`
- **р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓**: р╣Ар╕ер╕╖р╕нр╕Б "тЮХ р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓"
- **р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓**: р╣Ар╕ер╕╖р╕нр╕Бр╣Ар╕бр╕Щр╕╣р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г

## ЁЯдЦ AI Features

### AI Search
- р╕Вр╕вр╕▓р╕вр╕Др╕│р╕Др╣Йр╕Щр╕лр╕▓р╕Фр╣Йр╕зр╕вр╕Др╕│р╕Юр╣Йр╕нр╕Зр╕Др╕зр╕▓р╕бр╕лр╕бр╕▓р╕в
- р╕Ир╕▒р╕Фр╕нр╕▒р╕Щр╕Фр╕▒р╕Ър╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╣Бр╕Ър╕Ър╕нр╕▒р╕Ир╕Йр╕гр╕┤р╕вр╕░
- р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Ар╕Ир╕Хр╕Щр╕▓р╕Бр╕▓р╕гр╕Др╣Йр╕Щр╕лр╕▓
- р╣Бр╕Щр╕░р╕Щр╕│р╕Др╕│р╕Др╣Йр╕Щр╕лр╕▓р╕Чр╕▓р╕Зр╣Ар╕ер╕╖р╕нр╕Б

### Review Generation
- р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕╡р╕зр╕┤р╕зр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ 3 р╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ (р╕кр╕▒р╣Йр╕Щ/р╕Бр╕ер╕▓р╕З/р╕вр╕▓р╕з)
- р╕гр╕нр╕Зр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕Фр╣Йр╕зр╕в AI (OpenAI)
- р╣Ар╕Чр╕бр╣Ар╕Юр╕ер╕Хр╕Чр╕╡р╣Ир╕лр╕ер╕▓р╕Бр╕лр╕ер╕▓р╕в
- р╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╕кр╕Цр╕┤р╕Хр╕┤р╕гр╕╡р╕зр╕┤р╕з

## ЁЯУК р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ API

### р╕Др╣Йр╕Щр╕лр╕▓р╕кр╕┤р╕Щр╕Др╣Йр╕▓
```bash
curl "http://localhost:5000/api/search?query=iPhone&limit=5&ai=true"
```

### р╣Ар╕Юр╕┤р╣Ир╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
```bash
curl -X POST http://localhost:5000/api/products \
  -H "Content-Type: application/json" \
  -d '{
    "product_code": "PHONE002",
    "product_name": "Samsung Galaxy S24",
    "price": 35900,
    "shop_name": "Samsung Store",
    "commission_rate": 4.0,
    "product_link": "https://example.com/galaxy-s24",
    "offer_link": "https://affiliate.link/galaxy-s24",
    "category": "р╕нр╕┤р╣Ар╕ер╣Зр╕Бр╕Чр╕гр╕нр╕Щр╕┤р╕Бр╕кр╣М",
    "description": "р╕кр╕бр╕▓р╕гр╣Мр╕Чр╣Вр╕Яр╕Щр╕гр╕╕р╣Ир╕Щр╕ер╣Ир╕▓р╕кр╕╕р╕Фр╕Ир╕▓р╕Б Samsung"
  }'
```

### р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕╡р╕зр╕┤р╕зр╕кр╕┤р╕Щр╕Др╣Йр╕▓
```bash
curl -X POST http://localhost:5000/api/review \
  -H "Content-Type: application/json" \
  -d '{
    "product_code": "PHONE002",
    "style": "medium",
    "ai": false,
    "count": 1
  }'
```

## ЁЯУБ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Д

```
ЁЯУж Affiliate Product Review Bot
тФЬтФАтФА ЁЯУВ src/
тФВ   тФЬтФАтФА ЁЯУВ config/
тФВ   тФВ   тФФтФАтФА ЁЯУЬ config.py           # р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕гр╕░р╕Ър╕Ъ
тФВ   тФЬтФАтФА ЁЯУВ handlers/
тФВ   тФВ   тФФтФАтФА ЁЯУЬ affiliate_handler.py # LINE Bot Handler
тФВ   тФФтФАтФА ЁЯУВ utils/
тФВ       тФЬтФАтФА ЁЯУЬ supabase_database.py # Supabase Database
тФВ       тФЬтФАтФА ЁЯУЬ ai_search.py         # AI Search Engine
тФВ       тФФтФАтФА ЁЯУЬ review_generator.py  # Review Generator
тФЬтФАтФА ЁЯУЬ main.py                      # Flask Application
тФЬтФАтФА ЁЯУЬ requirements.txt             # Dependencies
тФЬтФАтФА ЁЯУЬ create_supabase_tables.sql   # Database Schema
тФЬтФАтФА ЁЯУЬ Procfile                     # Heroku Config
тФФтФАтФА ЁЯУЬ README.md                    # р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Щр╕╡р╣Й
```

## ЁЯЪА Deployment

### Heroku
1. р╕кр╕гр╣Йр╕▓р╕З Heroku App
2. р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ Environment Variables
3. Deploy:
```bash
git add .
git commit -m "Deploy affiliate bot"
git push heroku main
```

### р╕нр╕╖р╣Ир╕Щр╣Ж
р╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щр╕гр╕нр╕Зр╕гр╕▒р╕Ъ Docker р╣Бр╕ер╕░ cloud platforms р╕нр╕╖р╣Ир╕Щр╣Ж

## ЁЯФз р╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕З

### р╣Ар╕Юр╕┤р╣Ир╕бр╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Гр╕лр╕бр╣И
р╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕Яр╕ер╣М `src/utils/ai_search.py`:
```python
self.categories = {
    'р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣Ир╣Гр╕лр╕бр╣И': ['р╕Др╕│р╕Др╣Йр╕Щр╕лр╕▓р╕Чр╕╡р╣Ир╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕З', 'keyword2'],
    # ...
}
```

### р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Чр╕бр╣Ар╕Юр╕ер╕Хр╕гр╕╡р╕зр╕┤р╕з
р╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕Яр╕ер╣М `src/utils/review_generator.py`:
```python
self.review_templates = {
    'custom': [
        "р╣Ар╕Чр╕бр╣Ар╕Юр╕ер╕Хр╣Гр╕лр╕бр╣И: {product_name}..."
    ]
}
```

## ЁЯдЭ Contributing

1. Fork р╣Вр╕Ыр╕гр╣Ар╕Ир╕Д
2. р╕кр╕гр╣Йр╕▓р╕З Feature Branch
3. Commit р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
4. Push р╣Др╕Ыр╕вр╕▒р╕З Branch
5. р╕кр╕гр╣Йр╕▓р╕З Pull Request

## ЁЯУД License

MIT License - р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Гр╕Щр╣Др╕Яр╕ер╣М LICENSE

## ЁЯЖШ Support

р╕лр╕▓р╕Бр╕бр╕╡р╕Ыр╕▒р╕Нр╕лр╕▓р╕лр╕гр╕╖р╕нр╕Вр╣Йр╕нр╕кр╕Зр╕кр╕▒р╕в:
1. р╣Ар╕Ыр╕┤р╕Ф Issue р╣Гр╕Щ GitHub
2. р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╕Ьр╕╣р╣Йр╕Юр╕▒р╕Тр╕Щр╕▓
3. р╕Фр╕╣р╣Ар╕нр╕Бр╕кр╕▓р╕г API р╕Чр╕╡р╣И `/` endpoint

---

**ЁЯЫНя╕П Happy Affiliate Marketing!** 
р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕▓р╕вр╣Др╕Фр╣Йр╕Ир╕▓р╕Бр╕Бр╕▓р╕гр╕гр╕╡р╕зр╕┤р╕зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Фр╣Йр╕зр╕в AI Bot р╕Чр╕╡р╣Ир╕Чр╕гр╕Зр╕Юр╕ер╕▒р╕З
